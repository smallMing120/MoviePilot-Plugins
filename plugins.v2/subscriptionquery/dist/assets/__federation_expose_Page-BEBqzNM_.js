import{i as N}from"./vuetify-lib-vmanpUDa.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const{toDisplayString:n,createTextVNode:c,resolveComponent:l,withCtx:s,createVNode:a,createElementVNode:t,renderList:w,Fragment:C,openBlock:r,createElementBlock:i,createBlock:h,createCommentVNode:x}=await N("vue"),Q={class:"plugin-page"},q={key:0},A={class:"whitespace-nowrap break-keep text-high-emphasis"},G={size:"small",class:"me-1 mb-1",variant:"elevated",color:"warning"},J={class:"text-high-emphasis pt-1"},K={class:"text-sm my-1"},R={key:1},U={class:"text-sm"},W={class:"text-nowrap whitespace-nowrap"},X=["href"],Y={key:1},{ref:y,onMounted:Z}=await N("vue"),$={__name:"Page",props:{api:{type:Object,default:()=>{}}},emits:["action","switch","close"],setup(V,{emit:B}){const z=V,g=y("加載中..."),u=y([]),_=y(!0),p=B;async function b(){_.value=!0;try{const d=await z.api.get("plugin/SubscriptionQuery/getHistory");g.value=d.subscribe_search||"",u.value=d.histories?d.histories:[]}catch(d){console.error("获取数据失败:",d)}finally{_.value=!1,p("action")}}function S(){p("switch")}function E(){p("close")}return Z(()=>{b()}),(d,e)=>{const D=l("v-card-title"),F=l("v-img"),L=l("v-avatar"),v=l("v-chip"),P=l("v-table"),T=l("v-card-text"),j=l("v-spacer"),m=l("v-icon"),f=l("v-btn"),H=l("v-card-actions"),I=l("v-card");return r(),i("div",Q,[a(I,null,{default:s(()=>[a(D,null,{default:s(()=>[c("訂閲查詢:"+n(g.value),1)]),_:1}),a(T,{class:"pt-2"},{default:s(()=>[a(P,{hover:"true","fixex-header":"true",height:"500px"},{default:s(()=>[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",{class:"text-start"},"站点"),t("th",{class:"text-start"},"标题"),t("th",{class:"text-start"},"时间"),t("th",{class:"text-start"},"大小"),t("th",{class:"text-start"},"做种"),t("th",{class:"text-start"},"下载"),t("th",{class:"text-start"})])],-1)),u.value?(r(),i("tbody",q,[(r(!0),i(C,null,w(u.value,(o,M)=>(r(),i("tr",{key:M},[t("td",A,[a(L,{class:"rounded",variant:"flat"},{default:s(()=>[a(F,{src:o.site_icon},null,8,["src"])]),_:2},1024),e[0]||(e[0]=t("br",null,null,-1)),t("span",G,n(o.site_name),1)]),t("td",null,[t("div",J,n(o.title),1),t("div",K,n(o.description),1),o.freedate_diff?(r(),h(v,{key:0,variant:"elevated",color:"secondary",size:"small",class:"me-1 mb-1"},{default:s(()=>[c(n(o.freedate_diff),1)]),_:2},1024)):x("",!0),o.labels?(r(),i("div",R,[(r(!0),i(C,null,w(o.labels,k=>(r(),h(v,{variant:"elevated",color:"secondary",size:"small",class:"me-1 mb-1",key:k},{default:s(()=>[c(n(k),1)]),_:2},1024))),128))])):x("",!0)]),t("td",null,[t("div",null,n(o.date_elapsed),1),t("div",U,n(o.pubdate),1)]),t("td",null,[t("div",W,n(o.size),1)]),t("td",null,n(o.seeders),1),t("td",null,n(o.peers),1),t("td",null,[t("div",null,[a(v,{variant:"elevated",size:"default",class:"me-1 mb-1 text-white bg-sky-500"},{default:s(()=>[t("a",{href:o.page_url,target:"_blank"},"查看详情",8,X)]),_:2},1024)])])]))),128))])):(r(),i("tbody",Y,e[1]||(e[1]=[t("tr",null,[t("td",{colspan:"7",class:"text-center"},"没有数据")],-1)])))]),_:1})]),_:1}),a(H,null,{default:s(()=>[a(j),_.value?(r(),h(f,{key:0,color:"primary",onClick:b,loading:_.value},{default:s(()=>[a(m,{left:""},{default:s(()=>e[3]||(e[3]=[c("mdi-refresh")])),_:1})]),_:1},8,["loading"])):x("",!0),a(f,{color:"primary",onClick:S},{default:s(()=>[a(m,{left:""},{default:s(()=>e[4]||(e[4]=[c("mdi-cog")])),_:1}),e[5]||(e[5]=c(" 配置 "))]),_:1}),a(f,{color:"primary",onClick:E},{default:s(()=>[a(m,{left:""},{default:s(()=>e[6]||(e[6]=[c("mdi-close")])),_:1}),e[7]||(e[7]=c(" 关闭 "))]),_:1})]),_:1})]),_:1})])}}},st=O($,[["__scopeId","data-v-b91aae08"]]);export{st as default};
